"use strict";var post,catsPromise,authorPromise,postsPromise,posts={},authors={},cats={},ha=new Headers;ha.append("Cache-Control","public, max-age=12000"),catsPromise=fetch(wp_endpoint+"wp-json/wp/v2/categories",{headers:ha}).then(function(t){return t.json()}),postsPromise=fetch(wp_endpoint+"wp-json/wp/v2/posts/"+postID,{headers:ha}).then(function(t){return t.json()}).then(function(t){return console.log("Author prom set"),t}),$(document).ready(function(){$("#long-email").on("focus",function(){$(document).off("keyup"),$(document).keyup(function(t){if("Enter"==t.which)return $("#long-form-submit").click(),!1})}),$("#searchKey").on("focus",function(){$(document).off("keyup"),$(document).keyup(function(t){if("Enter"==t.which)return search(),!1})});var t=!1;Promise.all([catsPromise,postsPromise,authorPromise]).then(function(t){t[0].forEach(function(t){cats[t.id]=t,addTag(t.id)}),posts[t[1].id]=t[1]}).then(function(e){(post=posts[postID]).categories.forEach(function(e){e==externalNewsCategory&&(t=!0)}),fetch(wp_endpoint+"wp-json/wp/v2/users/"+post.author,{headers:ha}).then(function(t){return t.json()}).then(function(t){return authors[t.id]=t,t}).then(function(e){if($(".blank-entry").html(""),$(".real-entry").css("display","block"),$(".blank-placeholder-posts").css("display","none"),$("#post-title").html(post.title.rendered),$("#post-content").html(post.content.rendered),0==t){$("#post-author").html("<span>"+authors[post.author].name+"</span>");var a=new Date(post.date).toDateString(),o=a.split(" ").splice(1);a=o[0]+" "+o[1]+", "+o[2],$("#post-time").html(a),$(".post-author-avatar-link").css("cursor","default"),"https://secure.gravatar.com/avatar/8a2233e4af05d90078be153329a99004?s=96&d=mm&r=g"!=authors[post.author].avatar_urls[96]&&"http://0.gravatar.com/avatar/cbf3ae80bfffa54eade6fba665324a26?s=92&d=mm&r=g"!=authors[post.author].avatar_urls[96]||(authors[post.author].avatar_urls[96]="/assets/images/defaultavatar.jpg"),$(".post-author-avatar-link img").attr("src",authors[post.author].avatar_urls[96]),$(".post-author-avatar-link img").attr("alt",authors[post.author].name+"'s Avatar")}else $(".post-author-avatar-link").remove(),$(".post-meta").remove();var n="";post.categories.forEach(function(t){for(var e=0;e<allSiteLangs.length;e++)if(siteLangMap[allSiteLangs[e]]==t||t==externalNewsCategory||t==announcementCategory)return;n+="<a href="+siteRoot+"blog/?categories="+t+" l>"+cats[t].name+"</a>, "}),$("#post-tags").append(n.substr(0,n.length-2)),$("pre").removeClass("wp-block-preformatted"),$("pre").addClass("prettyprint linenums"),PR.prettyPrint()})}),$("#long-form-submit").on("click",function(t){t.preventDefault();var e=$("#long-email").val();if(validateEmail(e)){subscribeEmail(e,"long-email-subscribe-form");$("#long-email").removeClass("invalid-input"),$("#long-email").addClass("valid-input"),document.getElementById("long-email").setCustomValidity("")}else console.log("Invalid email"),document.getElementById("long-email").setCustomValidity("Invalid email"),$("#long-email").addClass("invalid-input"),document.getElementById("long-email").reportValidity();return!1}),$("#long-email").on("keydown",function(){document.getElementById("long-email").setCustomValidity("")})});